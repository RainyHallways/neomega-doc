import{_ as s,c as n,o as a,Q as o}from"./chunks/framework.c009d427.js";const q=JSON.parse('{"title":"配置读取","description":"配置读取示例","frontmatter":{"lang":"zh-CN","title":"配置读取","description":"配置读取示例"},"headers":[],"relativePath":"coromega_examples/配置读取和升级相关API/index.md","filePath":"coromega_examples/配置读取和升级相关API/index.md","lastUpdated":1724487756000}'),l={name:"coromega_examples/配置读取和升级相关API/index.md"},p=o(`<h1 id="配置读取和升级相关-api" tabindex="-1">配置读取和升级相关 API <a class="header-anchor" href="#配置读取和升级相关-api" aria-label="Permalink to &quot;配置读取和升级相关 API&quot;">​</a></h1><h2 id="读取配置文件的配置" tabindex="-1">读取配置文件的配置 <a class="header-anchor" href="#读取配置文件的配置" aria-label="Permalink to &quot;读取配置文件的配置&quot;">​</a></h2><ul><li>coromega.config <ul><li>范围: 任意</li><li>说明: 当执行 local coromega = require(&quot;coromega&quot;).from(omega) 时, 插件对应配置文件的参数将被自动读取到 coromega.config 中,<br> 您可以像访问一个通常的对象那样访问 coromega.config<br> 假设, 您的配置文件看起来如下:</li></ul><div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">{</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#79B8FF;">&quot;名称&quot;</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">&quot;购买.lua&quot;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#79B8FF;">&quot;描述&quot;</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">&quot;允许用户购买物品&quot;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#79B8FF;">&quot;是否禁用&quot;</span><span style="color:#E1E4E8;">: </span><span style="color:#79B8FF;">false</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#79B8FF;">&quot;来源&quot;</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">&quot;LuaLoader&quot;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#79B8FF;">&quot;配置&quot;</span><span style="color:#E1E4E8;">: {</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#79B8FF;">&quot;Version&quot;</span><span style="color:#E1E4E8;">:</span><span style="color:#9ECBFF;">&quot;0.0.1&quot;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#79B8FF;">&quot;记分板名&quot;</span><span style="color:#E1E4E8;">:</span><span style="color:#9ECBFF;">&quot;coin&quot;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#79B8FF;">&quot;物品清单&quot;</span><span style="color:#E1E4E8;">:[</span></span>
<span class="line"><span style="color:#E1E4E8;">            {</span><span style="color:#79B8FF;">&quot;名称&quot;</span><span style="color:#E1E4E8;">:</span><span style="color:#9ECBFF;">&quot;苹果&quot;</span><span style="color:#E1E4E8;">,</span><span style="color:#79B8FF;">&quot;MC名称&quot;</span><span style="color:#E1E4E8;">:</span><span style="color:#9ECBFF;">&quot;apple&quot;</span><span style="color:#E1E4E8;">,</span><span style="color:#79B8FF;">&quot;价格&quot;</span><span style="color:#E1E4E8;">:</span><span style="color:#79B8FF;">10</span><span style="color:#E1E4E8;">},</span></span>
<span class="line"><span style="color:#E1E4E8;">            {</span><span style="color:#79B8FF;">&quot;名称&quot;</span><span style="color:#E1E4E8;">:</span><span style="color:#9ECBFF;">&quot;石头&quot;</span><span style="color:#E1E4E8;">,</span><span style="color:#79B8FF;">&quot;MC名称&quot;</span><span style="color:#E1E4E8;">:</span><span style="color:#9ECBFF;">&quot;stone&quot;</span><span style="color:#E1E4E8;">,</span><span style="color:#79B8FF;">&quot;价格&quot;</span><span style="color:#E1E4E8;">:</span><span style="color:#79B8FF;">5</span><span style="color:#E1E4E8;">},</span></span>
<span class="line"><span style="color:#E1E4E8;">            {</span><span style="color:#79B8FF;">&quot;名称&quot;</span><span style="color:#E1E4E8;">:</span><span style="color:#9ECBFF;">&quot;玻璃&quot;</span><span style="color:#E1E4E8;">,</span><span style="color:#79B8FF;">&quot;MC名称&quot;</span><span style="color:#E1E4E8;">:</span><span style="color:#9ECBFF;">&quot;glass&quot;</span><span style="color:#E1E4E8;">,</span><span style="color:#79B8FF;">&quot;价格&quot;</span><span style="color:#E1E4E8;">:</span><span style="color:#79B8FF;">20</span><span style="color:#E1E4E8;">}</span></span>
<span class="line"><span style="color:#E1E4E8;">        ]</span></span>
<span class="line"><span style="color:#E1E4E8;">    }</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">{</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#005CC5;">&quot;名称&quot;</span><span style="color:#24292E;">: </span><span style="color:#032F62;">&quot;购买.lua&quot;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#005CC5;">&quot;描述&quot;</span><span style="color:#24292E;">: </span><span style="color:#032F62;">&quot;允许用户购买物品&quot;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#005CC5;">&quot;是否禁用&quot;</span><span style="color:#24292E;">: </span><span style="color:#005CC5;">false</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#005CC5;">&quot;来源&quot;</span><span style="color:#24292E;">: </span><span style="color:#032F62;">&quot;LuaLoader&quot;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#005CC5;">&quot;配置&quot;</span><span style="color:#24292E;">: {</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#005CC5;">&quot;Version&quot;</span><span style="color:#24292E;">:</span><span style="color:#032F62;">&quot;0.0.1&quot;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#005CC5;">&quot;记分板名&quot;</span><span style="color:#24292E;">:</span><span style="color:#032F62;">&quot;coin&quot;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#005CC5;">&quot;物品清单&quot;</span><span style="color:#24292E;">:[</span></span>
<span class="line"><span style="color:#24292E;">            {</span><span style="color:#005CC5;">&quot;名称&quot;</span><span style="color:#24292E;">:</span><span style="color:#032F62;">&quot;苹果&quot;</span><span style="color:#24292E;">,</span><span style="color:#005CC5;">&quot;MC名称&quot;</span><span style="color:#24292E;">:</span><span style="color:#032F62;">&quot;apple&quot;</span><span style="color:#24292E;">,</span><span style="color:#005CC5;">&quot;价格&quot;</span><span style="color:#24292E;">:</span><span style="color:#005CC5;">10</span><span style="color:#24292E;">},</span></span>
<span class="line"><span style="color:#24292E;">            {</span><span style="color:#005CC5;">&quot;名称&quot;</span><span style="color:#24292E;">:</span><span style="color:#032F62;">&quot;石头&quot;</span><span style="color:#24292E;">,</span><span style="color:#005CC5;">&quot;MC名称&quot;</span><span style="color:#24292E;">:</span><span style="color:#032F62;">&quot;stone&quot;</span><span style="color:#24292E;">,</span><span style="color:#005CC5;">&quot;价格&quot;</span><span style="color:#24292E;">:</span><span style="color:#005CC5;">5</span><span style="color:#24292E;">},</span></span>
<span class="line"><span style="color:#24292E;">            {</span><span style="color:#005CC5;">&quot;名称&quot;</span><span style="color:#24292E;">:</span><span style="color:#032F62;">&quot;玻璃&quot;</span><span style="color:#24292E;">,</span><span style="color:#005CC5;">&quot;MC名称&quot;</span><span style="color:#24292E;">:</span><span style="color:#032F62;">&quot;glass&quot;</span><span style="color:#24292E;">,</span><span style="color:#005CC5;">&quot;价格&quot;</span><span style="color:#24292E;">:</span><span style="color:#005CC5;">20</span><span style="color:#24292E;">}</span></span>
<span class="line"><span style="color:#24292E;">        ]</span></span>
<span class="line"><span style="color:#24292E;">    }</span></span>
<span class="line"><span style="color:#24292E;">}</span></span></code></pre></div>那么您可以这样访问它们:<div class="language-lua vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">lua</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#79B8FF;">print</span><span style="color:#E1E4E8;">(json.</span><span style="color:#79B8FF;">encode</span><span style="color:#E1E4E8;">(coromega.</span><span style="color:#B392F0;">config</span><span style="color:#E1E4E8;">))</span></span>
<span class="line"><span style="color:#F97583;">local</span><span style="color:#E1E4E8;"> version</span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;">coromega.</span><span style="color:#B392F0;">config</span><span style="color:#E1E4E8;">.</span><span style="color:#B392F0;">Version</span></span>
<span class="line"><span style="color:#6A737D;">-- 或</span></span>
<span class="line"><span style="color:#F97583;">local</span><span style="color:#E1E4E8;"> version</span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;">coromega.</span><span style="color:#B392F0;">config</span><span style="color:#E1E4E8;">[</span><span style="color:#9ECBFF;">&quot;Version&quot;</span><span style="color:#E1E4E8;">]</span></span>
<span class="line"><span style="color:#F97583;">local</span><span style="color:#E1E4E8;"> scoreboard_name</span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;">coromega.</span><span style="color:#B392F0;">config</span><span style="color:#E1E4E8;">[</span><span style="color:#9ECBFF;">&quot;记分板名&quot;</span><span style="color:#E1E4E8;">]</span></span>
<span class="line"><span style="color:#F97583;">local</span><span style="color:#E1E4E8;"> items_list</span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;">coromega.</span><span style="color:#B392F0;">config</span><span style="color:#E1E4E8;">[</span><span style="color:#9ECBFF;">&quot;物品清单&quot;</span><span style="color:#E1E4E8;">]</span></span>
<span class="line"><span style="color:#F97583;">for</span><span style="color:#E1E4E8;"> item_i,item </span><span style="color:#F97583;">in</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">ipairs</span><span style="color:#E1E4E8;">(items_list) </span><span style="color:#F97583;">do</span><span style="color:#E1E4E8;"> </span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#79B8FF;">print</span><span style="color:#E1E4E8;">((</span><span style="color:#9ECBFF;">&quot;第 %s 个物品: %s&quot;</span><span style="color:#E1E4E8;">):</span><span style="color:#79B8FF;">format</span><span style="color:#E1E4E8;">(item_i,item[</span><span style="color:#9ECBFF;">&quot;名称&quot;</span><span style="color:#E1E4E8;">]))</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">for</span><span style="color:#E1E4E8;"> key,value </span><span style="color:#F97583;">in</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">pairs</span><span style="color:#E1E4E8;">(item) </span><span style="color:#F97583;">do</span><span style="color:#E1E4E8;"> </span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#79B8FF;">print</span><span style="color:#E1E4E8;">((</span><span style="color:#9ECBFF;">&quot;- %s:%s&quot;</span><span style="color:#E1E4E8;">):</span><span style="color:#79B8FF;">format</span><span style="color:#E1E4E8;">(key,value))</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">end</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;">-- 或</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">local</span><span style="color:#E1E4E8;"> item_name</span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;">item[</span><span style="color:#9ECBFF;">&quot;名称&quot;</span><span style="color:#E1E4E8;">]</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">local</span><span style="color:#E1E4E8;"> item_mc_name</span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;">item[</span><span style="color:#9ECBFF;">&quot;MC名称&quot;</span><span style="color:#E1E4E8;">]</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">local</span><span style="color:#E1E4E8;"> item_price</span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;">item[</span><span style="color:#9ECBFF;">&quot;价格&quot;</span><span style="color:#E1E4E8;">]</span></span>
<span class="line"><span style="color:#F97583;">end</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#005CC5;">print</span><span style="color:#24292E;">(json.</span><span style="color:#005CC5;">encode</span><span style="color:#24292E;">(coromega.</span><span style="color:#6F42C1;">config</span><span style="color:#24292E;">))</span></span>
<span class="line"><span style="color:#D73A49;">local</span><span style="color:#24292E;"> version</span><span style="color:#D73A49;">=</span><span style="color:#24292E;">coromega.</span><span style="color:#6F42C1;">config</span><span style="color:#24292E;">.</span><span style="color:#6F42C1;">Version</span></span>
<span class="line"><span style="color:#6A737D;">-- 或</span></span>
<span class="line"><span style="color:#D73A49;">local</span><span style="color:#24292E;"> version</span><span style="color:#D73A49;">=</span><span style="color:#24292E;">coromega.</span><span style="color:#6F42C1;">config</span><span style="color:#24292E;">[</span><span style="color:#032F62;">&quot;Version&quot;</span><span style="color:#24292E;">]</span></span>
<span class="line"><span style="color:#D73A49;">local</span><span style="color:#24292E;"> scoreboard_name</span><span style="color:#D73A49;">=</span><span style="color:#24292E;">coromega.</span><span style="color:#6F42C1;">config</span><span style="color:#24292E;">[</span><span style="color:#032F62;">&quot;记分板名&quot;</span><span style="color:#24292E;">]</span></span>
<span class="line"><span style="color:#D73A49;">local</span><span style="color:#24292E;"> items_list</span><span style="color:#D73A49;">=</span><span style="color:#24292E;">coromega.</span><span style="color:#6F42C1;">config</span><span style="color:#24292E;">[</span><span style="color:#032F62;">&quot;物品清单&quot;</span><span style="color:#24292E;">]</span></span>
<span class="line"><span style="color:#D73A49;">for</span><span style="color:#24292E;"> item_i,item </span><span style="color:#D73A49;">in</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">ipairs</span><span style="color:#24292E;">(items_list) </span><span style="color:#D73A49;">do</span><span style="color:#24292E;"> </span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#005CC5;">print</span><span style="color:#24292E;">((</span><span style="color:#032F62;">&quot;第 %s 个物品: %s&quot;</span><span style="color:#24292E;">):</span><span style="color:#005CC5;">format</span><span style="color:#24292E;">(item_i,item[</span><span style="color:#032F62;">&quot;名称&quot;</span><span style="color:#24292E;">]))</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">for</span><span style="color:#24292E;"> key,value </span><span style="color:#D73A49;">in</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">pairs</span><span style="color:#24292E;">(item) </span><span style="color:#D73A49;">do</span><span style="color:#24292E;"> </span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#005CC5;">print</span><span style="color:#24292E;">((</span><span style="color:#032F62;">&quot;- %s:%s&quot;</span><span style="color:#24292E;">):</span><span style="color:#005CC5;">format</span><span style="color:#24292E;">(key,value))</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">end</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6A737D;">-- 或</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">local</span><span style="color:#24292E;"> item_name</span><span style="color:#D73A49;">=</span><span style="color:#24292E;">item[</span><span style="color:#032F62;">&quot;名称&quot;</span><span style="color:#24292E;">]</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">local</span><span style="color:#24292E;"> item_mc_name</span><span style="color:#D73A49;">=</span><span style="color:#24292E;">item[</span><span style="color:#032F62;">&quot;MC名称&quot;</span><span style="color:#24292E;">]</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">local</span><span style="color:#24292E;"> item_price</span><span style="color:#D73A49;">=</span><span style="color:#24292E;">item[</span><span style="color:#032F62;">&quot;价格&quot;</span><span style="color:#24292E;">]</span></span>
<span class="line"><span style="color:#D73A49;">end</span></span></code></pre></div></li></ul><h2 id="升级文件配置" tabindex="-1">升级文件配置 <a class="header-anchor" href="#升级文件配置" aria-label="Permalink to &quot;升级文件配置&quot;">​</a></h2><ul><li>update_config(new_config) <ul><li>范围: 任意</li><li>说明: 当您升级了您的代码后，代码可能需要一些旧配置中原本不存在的配置项, 此方法存在的意义就是允许您修改配置文件，使之与新代码对应<br> 例如，在上述配置文件中，您希望为配置文件添加 &quot;记分板显示名&quot; 这一选项, 您可以这么做:</li></ul><div class="language-lua vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">lua</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">local</span><span style="color:#E1E4E8;"> version</span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;">coromega.</span><span style="color:#B392F0;">config</span><span style="color:#E1E4E8;">.</span><span style="color:#B392F0;">Version</span></span>
<span class="line"><span style="color:#F97583;">if</span><span style="color:#E1E4E8;"> version</span><span style="color:#F97583;">==</span><span style="color:#9ECBFF;">&quot;0.0.1&quot; </span><span style="color:#F97583;">then</span><span style="color:#E1E4E8;"> </span><span style="color:#6A737D;">-- 只有当配置文件版本较旧的时候才升级</span></span>
<span class="line"><span style="color:#E1E4E8;">    coromega.</span><span style="color:#B392F0;">config</span><span style="color:#E1E4E8;">[</span><span style="color:#9ECBFF;">&quot;记分板显示名&quot;</span><span style="color:#E1E4E8;">]</span><span style="color:#F97583;">=</span><span style="color:#9ECBFF;">&quot;金币&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">    coromega.</span><span style="color:#B392F0;">config</span><span style="color:#E1E4E8;">.</span><span style="color:#B392F0;">Version</span><span style="color:#F97583;">=</span><span style="color:#9ECBFF;">&quot;0.0.2&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#B392F0;">coromega</span><span style="color:#E1E4E8;">:</span><span style="color:#79B8FF;">update_config</span><span style="color:#E1E4E8;">(coromega.</span><span style="color:#B392F0;">config</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#F97583;">end</span></span>
<span class="line"><span style="color:#F97583;">local</span><span style="color:#E1E4E8;"> scoreboard_display_name</span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;">coromega.</span><span style="color:#B392F0;">config</span><span style="color:#E1E4E8;">[</span><span style="color:#9ECBFF;">&quot;记分板显示名&quot;</span><span style="color:#E1E4E8;">]</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">local</span><span style="color:#24292E;"> version</span><span style="color:#D73A49;">=</span><span style="color:#24292E;">coromega.</span><span style="color:#6F42C1;">config</span><span style="color:#24292E;">.</span><span style="color:#6F42C1;">Version</span></span>
<span class="line"><span style="color:#D73A49;">if</span><span style="color:#24292E;"> version</span><span style="color:#D73A49;">==</span><span style="color:#032F62;">&quot;0.0.1&quot; </span><span style="color:#D73A49;">then</span><span style="color:#24292E;"> </span><span style="color:#6A737D;">-- 只有当配置文件版本较旧的时候才升级</span></span>
<span class="line"><span style="color:#24292E;">    coromega.</span><span style="color:#6F42C1;">config</span><span style="color:#24292E;">[</span><span style="color:#032F62;">&quot;记分板显示名&quot;</span><span style="color:#24292E;">]</span><span style="color:#D73A49;">=</span><span style="color:#032F62;">&quot;金币&quot;</span></span>
<span class="line"><span style="color:#24292E;">    coromega.</span><span style="color:#6F42C1;">config</span><span style="color:#24292E;">.</span><span style="color:#6F42C1;">Version</span><span style="color:#D73A49;">=</span><span style="color:#032F62;">&quot;0.0.2&quot;</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6F42C1;">coromega</span><span style="color:#24292E;">:</span><span style="color:#005CC5;">update_config</span><span style="color:#24292E;">(coromega.</span><span style="color:#6F42C1;">config</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#D73A49;">end</span></span>
<span class="line"><span style="color:#D73A49;">local</span><span style="color:#24292E;"> scoreboard_display_name</span><span style="color:#D73A49;">=</span><span style="color:#24292E;">coromega.</span><span style="color:#6F42C1;">config</span><span style="color:#24292E;">[</span><span style="color:#032F62;">&quot;记分板显示名&quot;</span><span style="color:#24292E;">]</span></span></code></pre></div>当您的插件运行时, 配置文件将被更新为:<div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#E1E4E8;">{</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#79B8FF;">&quot;名称&quot;</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">&quot;购买.lua&quot;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#79B8FF;">&quot;描述&quot;</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">&quot;允许用户购买物品&quot;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#79B8FF;">&quot;是否禁用&quot;</span><span style="color:#E1E4E8;">: </span><span style="color:#79B8FF;">false</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#79B8FF;">&quot;来源&quot;</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">&quot;LuaLoader&quot;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#79B8FF;">&quot;配置&quot;</span><span style="color:#E1E4E8;">: {</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#79B8FF;">&quot;Version&quot;</span><span style="color:#E1E4E8;">:</span><span style="color:#9ECBFF;">&quot;0.0.2&quot;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#79B8FF;">&quot;记分板名&quot;</span><span style="color:#E1E4E8;">:</span><span style="color:#9ECBFF;">&quot;coin&quot;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#79B8FF;">&quot;物品清单&quot;</span><span style="color:#E1E4E8;">:[</span></span>
<span class="line"><span style="color:#E1E4E8;">            {</span><span style="color:#79B8FF;">&quot;名称&quot;</span><span style="color:#E1E4E8;">:</span><span style="color:#9ECBFF;">&quot;苹果&quot;</span><span style="color:#E1E4E8;">,</span><span style="color:#79B8FF;">&quot;MC名称&quot;</span><span style="color:#E1E4E8;">:</span><span style="color:#9ECBFF;">&quot;apple&quot;</span><span style="color:#E1E4E8;">,</span><span style="color:#79B8FF;">&quot;价格&quot;</span><span style="color:#E1E4E8;">:</span><span style="color:#79B8FF;">10</span><span style="color:#E1E4E8;">},</span></span>
<span class="line"><span style="color:#E1E4E8;">            {</span><span style="color:#79B8FF;">&quot;名称&quot;</span><span style="color:#E1E4E8;">:</span><span style="color:#9ECBFF;">&quot;石头&quot;</span><span style="color:#E1E4E8;">,</span><span style="color:#79B8FF;">&quot;MC名称&quot;</span><span style="color:#E1E4E8;">:</span><span style="color:#9ECBFF;">&quot;stone&quot;</span><span style="color:#E1E4E8;">,</span><span style="color:#79B8FF;">&quot;价格&quot;</span><span style="color:#E1E4E8;">:</span><span style="color:#79B8FF;">5</span><span style="color:#E1E4E8;">},</span></span>
<span class="line"><span style="color:#E1E4E8;">            {</span><span style="color:#79B8FF;">&quot;名称&quot;</span><span style="color:#E1E4E8;">:</span><span style="color:#9ECBFF;">&quot;玻璃&quot;</span><span style="color:#E1E4E8;">,</span><span style="color:#79B8FF;">&quot;MC名称&quot;</span><span style="color:#E1E4E8;">:</span><span style="color:#9ECBFF;">&quot;glass&quot;</span><span style="color:#E1E4E8;">,</span><span style="color:#79B8FF;">&quot;价格&quot;</span><span style="color:#E1E4E8;">:</span><span style="color:#79B8FF;">20</span><span style="color:#E1E4E8;">}</span></span>
<span class="line"><span style="color:#E1E4E8;">        ],</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#79B8FF;">&quot;记分板显示名&quot;</span><span style="color:#E1E4E8;">:</span><span style="color:#9ECBFF;">&quot;金币&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">    }</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292E;">{</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#005CC5;">&quot;名称&quot;</span><span style="color:#24292E;">: </span><span style="color:#032F62;">&quot;购买.lua&quot;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#005CC5;">&quot;描述&quot;</span><span style="color:#24292E;">: </span><span style="color:#032F62;">&quot;允许用户购买物品&quot;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#005CC5;">&quot;是否禁用&quot;</span><span style="color:#24292E;">: </span><span style="color:#005CC5;">false</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#005CC5;">&quot;来源&quot;</span><span style="color:#24292E;">: </span><span style="color:#032F62;">&quot;LuaLoader&quot;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#005CC5;">&quot;配置&quot;</span><span style="color:#24292E;">: {</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#005CC5;">&quot;Version&quot;</span><span style="color:#24292E;">:</span><span style="color:#032F62;">&quot;0.0.2&quot;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#005CC5;">&quot;记分板名&quot;</span><span style="color:#24292E;">:</span><span style="color:#032F62;">&quot;coin&quot;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#005CC5;">&quot;物品清单&quot;</span><span style="color:#24292E;">:[</span></span>
<span class="line"><span style="color:#24292E;">            {</span><span style="color:#005CC5;">&quot;名称&quot;</span><span style="color:#24292E;">:</span><span style="color:#032F62;">&quot;苹果&quot;</span><span style="color:#24292E;">,</span><span style="color:#005CC5;">&quot;MC名称&quot;</span><span style="color:#24292E;">:</span><span style="color:#032F62;">&quot;apple&quot;</span><span style="color:#24292E;">,</span><span style="color:#005CC5;">&quot;价格&quot;</span><span style="color:#24292E;">:</span><span style="color:#005CC5;">10</span><span style="color:#24292E;">},</span></span>
<span class="line"><span style="color:#24292E;">            {</span><span style="color:#005CC5;">&quot;名称&quot;</span><span style="color:#24292E;">:</span><span style="color:#032F62;">&quot;石头&quot;</span><span style="color:#24292E;">,</span><span style="color:#005CC5;">&quot;MC名称&quot;</span><span style="color:#24292E;">:</span><span style="color:#032F62;">&quot;stone&quot;</span><span style="color:#24292E;">,</span><span style="color:#005CC5;">&quot;价格&quot;</span><span style="color:#24292E;">:</span><span style="color:#005CC5;">5</span><span style="color:#24292E;">},</span></span>
<span class="line"><span style="color:#24292E;">            {</span><span style="color:#005CC5;">&quot;名称&quot;</span><span style="color:#24292E;">:</span><span style="color:#032F62;">&quot;玻璃&quot;</span><span style="color:#24292E;">,</span><span style="color:#005CC5;">&quot;MC名称&quot;</span><span style="color:#24292E;">:</span><span style="color:#032F62;">&quot;glass&quot;</span><span style="color:#24292E;">,</span><span style="color:#005CC5;">&quot;价格&quot;</span><span style="color:#24292E;">:</span><span style="color:#005CC5;">20</span><span style="color:#24292E;">}</span></span>
<span class="line"><span style="color:#24292E;">        ],</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#005CC5;">&quot;记分板显示名&quot;</span><span style="color:#24292E;">:</span><span style="color:#032F62;">&quot;金币&quot;</span></span>
<span class="line"><span style="color:#24292E;">    }</span></span>
<span class="line"><span style="color:#24292E;">}</span></span></code></pre></div></li></ul><h2 id="综合使用" tabindex="-1">综合使用 <a class="header-anchor" href="#综合使用" aria-label="Permalink to &quot;综合使用&quot;">​</a></h2><div class="language-lua vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">lua</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#79B8FF;">print</span><span style="color:#E1E4E8;">(json.</span><span style="color:#79B8FF;">encode</span><span style="color:#E1E4E8;">(coromega.</span><span style="color:#B392F0;">config</span><span style="color:#E1E4E8;">))</span></span>
<span class="line"><span style="color:#F97583;">local</span><span style="color:#E1E4E8;"> version</span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;">coromega.</span><span style="color:#B392F0;">config</span><span style="color:#E1E4E8;">.</span><span style="color:#B392F0;">Version</span></span>
<span class="line"><span style="color:#6A737D;">-- 或</span></span>
<span class="line"><span style="color:#F97583;">local</span><span style="color:#E1E4E8;"> version</span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;">coromega.</span><span style="color:#B392F0;">config</span><span style="color:#E1E4E8;">[</span><span style="color:#9ECBFF;">&quot;Version&quot;</span><span style="color:#E1E4E8;">]</span></span>
<span class="line"><span style="color:#F97583;">local</span><span style="color:#E1E4E8;"> scoreboard_name</span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;">coromega.</span><span style="color:#B392F0;">config</span><span style="color:#E1E4E8;">[</span><span style="color:#9ECBFF;">&quot;记分板名&quot;</span><span style="color:#E1E4E8;">]</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">if</span><span style="color:#E1E4E8;"> version</span><span style="color:#F97583;">==</span><span style="color:#9ECBFF;">&quot;0.0.1&quot; </span><span style="color:#F97583;">then</span><span style="color:#E1E4E8;"> </span><span style="color:#6A737D;">-- 只有当配置文件版本较旧的时候才升级</span></span>
<span class="line"><span style="color:#E1E4E8;">    coromega.</span><span style="color:#B392F0;">config</span><span style="color:#E1E4E8;">[</span><span style="color:#9ECBFF;">&quot;记分板显示名&quot;</span><span style="color:#E1E4E8;">]</span><span style="color:#F97583;">=</span><span style="color:#9ECBFF;">&quot;金币&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">    coromega.</span><span style="color:#B392F0;">config</span><span style="color:#E1E4E8;">.</span><span style="color:#B392F0;">Version</span><span style="color:#F97583;">=</span><span style="color:#9ECBFF;">&quot;0.0.2&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#B392F0;">coromega</span><span style="color:#E1E4E8;">:</span><span style="color:#79B8FF;">update_config</span><span style="color:#E1E4E8;">(coromega.</span><span style="color:#B392F0;">config</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#F97583;">end</span></span>
<span class="line"></span>
<span class="line"><span style="color:#F97583;">local</span><span style="color:#E1E4E8;"> scoreboard_display_name</span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;">coromega.</span><span style="color:#B392F0;">config</span><span style="color:#E1E4E8;">[</span><span style="color:#9ECBFF;">&quot;记分板显示名&quot;</span><span style="color:#E1E4E8;">]</span></span>
<span class="line"><span style="color:#F97583;">local</span><span style="color:#E1E4E8;"> items_list</span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;">coromega.</span><span style="color:#B392F0;">config</span><span style="color:#E1E4E8;">[</span><span style="color:#9ECBFF;">&quot;物品清单&quot;</span><span style="color:#E1E4E8;">]</span></span>
<span class="line"><span style="color:#F97583;">for</span><span style="color:#E1E4E8;"> item_i,item </span><span style="color:#F97583;">in</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">ipairs</span><span style="color:#E1E4E8;">(items_list) </span><span style="color:#F97583;">do</span><span style="color:#E1E4E8;"> </span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#79B8FF;">print</span><span style="color:#E1E4E8;">((</span><span style="color:#9ECBFF;">&quot;第 %s 个物品: %s&quot;</span><span style="color:#E1E4E8;">):</span><span style="color:#79B8FF;">format</span><span style="color:#E1E4E8;">(item_i,item[</span><span style="color:#9ECBFF;">&quot;名称&quot;</span><span style="color:#E1E4E8;">]))</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">for</span><span style="color:#E1E4E8;"> key,value </span><span style="color:#F97583;">in</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">pairs</span><span style="color:#E1E4E8;">(item) </span><span style="color:#F97583;">do</span><span style="color:#E1E4E8;"> </span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#79B8FF;">print</span><span style="color:#E1E4E8;">((</span><span style="color:#9ECBFF;">&quot;- %s:%s&quot;</span><span style="color:#E1E4E8;">):</span><span style="color:#79B8FF;">format</span><span style="color:#E1E4E8;">(key,value))</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">end</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;">-- 或</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">local</span><span style="color:#E1E4E8;"> item_name</span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;">item[</span><span style="color:#9ECBFF;">&quot;名称&quot;</span><span style="color:#E1E4E8;">]</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">local</span><span style="color:#E1E4E8;"> item_mc_name</span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;">item[</span><span style="color:#9ECBFF;">&quot;MC名称&quot;</span><span style="color:#E1E4E8;">]</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">local</span><span style="color:#E1E4E8;"> item_price</span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;">item[</span><span style="color:#9ECBFF;">&quot;价格&quot;</span><span style="color:#E1E4E8;">]</span></span>
<span class="line"><span style="color:#F97583;">end</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#005CC5;">print</span><span style="color:#24292E;">(json.</span><span style="color:#005CC5;">encode</span><span style="color:#24292E;">(coromega.</span><span style="color:#6F42C1;">config</span><span style="color:#24292E;">))</span></span>
<span class="line"><span style="color:#D73A49;">local</span><span style="color:#24292E;"> version</span><span style="color:#D73A49;">=</span><span style="color:#24292E;">coromega.</span><span style="color:#6F42C1;">config</span><span style="color:#24292E;">.</span><span style="color:#6F42C1;">Version</span></span>
<span class="line"><span style="color:#6A737D;">-- 或</span></span>
<span class="line"><span style="color:#D73A49;">local</span><span style="color:#24292E;"> version</span><span style="color:#D73A49;">=</span><span style="color:#24292E;">coromega.</span><span style="color:#6F42C1;">config</span><span style="color:#24292E;">[</span><span style="color:#032F62;">&quot;Version&quot;</span><span style="color:#24292E;">]</span></span>
<span class="line"><span style="color:#D73A49;">local</span><span style="color:#24292E;"> scoreboard_name</span><span style="color:#D73A49;">=</span><span style="color:#24292E;">coromega.</span><span style="color:#6F42C1;">config</span><span style="color:#24292E;">[</span><span style="color:#032F62;">&quot;记分板名&quot;</span><span style="color:#24292E;">]</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;">if</span><span style="color:#24292E;"> version</span><span style="color:#D73A49;">==</span><span style="color:#032F62;">&quot;0.0.1&quot; </span><span style="color:#D73A49;">then</span><span style="color:#24292E;"> </span><span style="color:#6A737D;">-- 只有当配置文件版本较旧的时候才升级</span></span>
<span class="line"><span style="color:#24292E;">    coromega.</span><span style="color:#6F42C1;">config</span><span style="color:#24292E;">[</span><span style="color:#032F62;">&quot;记分板显示名&quot;</span><span style="color:#24292E;">]</span><span style="color:#D73A49;">=</span><span style="color:#032F62;">&quot;金币&quot;</span></span>
<span class="line"><span style="color:#24292E;">    coromega.</span><span style="color:#6F42C1;">config</span><span style="color:#24292E;">.</span><span style="color:#6F42C1;">Version</span><span style="color:#D73A49;">=</span><span style="color:#032F62;">&quot;0.0.2&quot;</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6F42C1;">coromega</span><span style="color:#24292E;">:</span><span style="color:#005CC5;">update_config</span><span style="color:#24292E;">(coromega.</span><span style="color:#6F42C1;">config</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#D73A49;">end</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49;">local</span><span style="color:#24292E;"> scoreboard_display_name</span><span style="color:#D73A49;">=</span><span style="color:#24292E;">coromega.</span><span style="color:#6F42C1;">config</span><span style="color:#24292E;">[</span><span style="color:#032F62;">&quot;记分板显示名&quot;</span><span style="color:#24292E;">]</span></span>
<span class="line"><span style="color:#D73A49;">local</span><span style="color:#24292E;"> items_list</span><span style="color:#D73A49;">=</span><span style="color:#24292E;">coromega.</span><span style="color:#6F42C1;">config</span><span style="color:#24292E;">[</span><span style="color:#032F62;">&quot;物品清单&quot;</span><span style="color:#24292E;">]</span></span>
<span class="line"><span style="color:#D73A49;">for</span><span style="color:#24292E;"> item_i,item </span><span style="color:#D73A49;">in</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">ipairs</span><span style="color:#24292E;">(items_list) </span><span style="color:#D73A49;">do</span><span style="color:#24292E;"> </span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#005CC5;">print</span><span style="color:#24292E;">((</span><span style="color:#032F62;">&quot;第 %s 个物品: %s&quot;</span><span style="color:#24292E;">):</span><span style="color:#005CC5;">format</span><span style="color:#24292E;">(item_i,item[</span><span style="color:#032F62;">&quot;名称&quot;</span><span style="color:#24292E;">]))</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">for</span><span style="color:#24292E;"> key,value </span><span style="color:#D73A49;">in</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">pairs</span><span style="color:#24292E;">(item) </span><span style="color:#D73A49;">do</span><span style="color:#24292E;"> </span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#005CC5;">print</span><span style="color:#24292E;">((</span><span style="color:#032F62;">&quot;- %s:%s&quot;</span><span style="color:#24292E;">):</span><span style="color:#005CC5;">format</span><span style="color:#24292E;">(key,value))</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">end</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6A737D;">-- 或</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">local</span><span style="color:#24292E;"> item_name</span><span style="color:#D73A49;">=</span><span style="color:#24292E;">item[</span><span style="color:#032F62;">&quot;名称&quot;</span><span style="color:#24292E;">]</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">local</span><span style="color:#24292E;"> item_mc_name</span><span style="color:#D73A49;">=</span><span style="color:#24292E;">item[</span><span style="color:#032F62;">&quot;MC名称&quot;</span><span style="color:#24292E;">]</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">local</span><span style="color:#24292E;"> item_price</span><span style="color:#D73A49;">=</span><span style="color:#24292E;">item[</span><span style="color:#032F62;">&quot;价格&quot;</span><span style="color:#24292E;">]</span></span>
<span class="line"><span style="color:#D73A49;">end</span></span></code></pre></div>`,7),t=[p];function e(c,r,E,y,i,u){return a(),n("div",null,t)}const C=s(l,[["render",e]]);export{q as __pageData,C as default};
