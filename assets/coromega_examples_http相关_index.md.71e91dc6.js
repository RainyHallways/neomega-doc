import{_ as s,c as n,o as a,Q as o}from"./chunks/framework.c009d427.js";const F=JSON.parse('{"title":"HTTP","description":"HTTP示例","frontmatter":{"lang":"zh-CN","title":"HTTP","description":"HTTP示例"},"headers":[],"relativePath":"coromega_examples/http相关/index.md","filePath":"coromega_examples/http相关/index.md","lastUpdated":1724487756000}'),p={name:"coromega_examples/http相关/index.md"},l=o(`<h1 id="http-相关api" tabindex="-1">HTTP 相关API <a class="header-anchor" href="#http-相关api" aria-label="Permalink to &quot;HTTP 相关API&quot;">​</a></h1><h2 id="http-request" tabindex="-1">HTTP request <a class="header-anchor" href="#http-request" aria-label="Permalink to &quot;HTTP request&quot;">​</a></h2><ul><li>http_request(method,url,option) <ul><li>范围: 协程内</li><li>参数: <ul><li>method: 方法 get/post/put/delete/head/patch</li><li>url: 字符串形式地址</li><li>option: 可不填，或参考 <a href="https://github.com/cjoudrey/gluahttp" target="_blank" rel="noreferrer">https://github.com/cjoudrey/gluahttp</a> 的选项, http 模块为 gluahttp 的异步版本</li></ul></li><li>返回: <ul><li>请求结果对象, 包含以下成员 <ul><li>status_code: 状态码</li><li>headers: 响应头</li><li>body_size: body 长度</li><li>body: body</li><li>cookies</li><li>url</li></ul></li><li>字符串形式的错误信息(如果有)</li></ul></li></ul><div class="language-lua vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">lua</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">local</span><span style="color:#E1E4E8;"> response, error_message </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">coromega</span><span style="color:#E1E4E8;">:</span><span style="color:#79B8FF;">http_request</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;GET&quot;</span><span style="color:#E1E4E8;">, </span><span style="color:#9ECBFF;">&quot;http://example.com&quot;</span><span style="color:#E1E4E8;">, {</span></span>
<span class="line"><span style="color:#E1E4E8;">    query </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;page=1&quot;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">    timeout </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;30s&quot;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">    headers </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">        Accept </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;*/*&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">    }</span></span>
<span class="line"><span style="color:#E1E4E8;">})</span></span>
<span class="line"><span style="color:#F97583;">if</span><span style="color:#E1E4E8;"> error_message </span><span style="color:#F97583;">then</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#79B8FF;">print</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;request error: &quot;</span><span style="color:#E1E4E8;">, error_message)</span></span>
<span class="line"><span style="color:#F97583;">else</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#79B8FF;">print</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;request response: &quot;</span><span style="color:#E1E4E8;">, response)</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#79B8FF;">print</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;request response status_code: &quot;</span><span style="color:#E1E4E8;">, response.</span><span style="color:#B392F0;">status_code</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#79B8FF;">print</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;request response headers: &quot;</span><span style="color:#E1E4E8;">, response.</span><span style="color:#B392F0;">headers</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#79B8FF;">print</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;request response body_size: &quot;</span><span style="color:#E1E4E8;">, response.</span><span style="color:#B392F0;">body_size</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#79B8FF;">print</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;request response body: &quot;</span><span style="color:#E1E4E8;">, response.</span><span style="color:#B392F0;">body</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#79B8FF;">print</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;request response cookies: &quot;</span><span style="color:#E1E4E8;">, response.</span><span style="color:#B392F0;">cookies</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#79B8FF;">print</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;request response url: &quot;</span><span style="color:#E1E4E8;">, response.</span><span style="color:#B392F0;">url</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#F97583;">end</span></span>
<span class="line"><span style="color:#F97583;">local</span><span style="color:#E1E4E8;"> response, error_message </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">coromega</span><span style="color:#E1E4E8;">:</span><span style="color:#79B8FF;">http_request</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;GET&quot;</span><span style="color:#E1E4E8;">, </span><span style="color:#9ECBFF;">&quot;http://example.com&quot;</span><span style="color:#E1E4E8;">)</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">local</span><span style="color:#24292E;"> response, error_message </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">coromega</span><span style="color:#24292E;">:</span><span style="color:#005CC5;">http_request</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;GET&quot;</span><span style="color:#24292E;">, </span><span style="color:#032F62;">&quot;http://example.com&quot;</span><span style="color:#24292E;">, {</span></span>
<span class="line"><span style="color:#24292E;">    query </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;page=1&quot;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">    timeout </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;30s&quot;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">    headers </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">        Accept </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;*/*&quot;</span></span>
<span class="line"><span style="color:#24292E;">    }</span></span>
<span class="line"><span style="color:#24292E;">})</span></span>
<span class="line"><span style="color:#D73A49;">if</span><span style="color:#24292E;"> error_message </span><span style="color:#D73A49;">then</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#005CC5;">print</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;request error: &quot;</span><span style="color:#24292E;">, error_message)</span></span>
<span class="line"><span style="color:#D73A49;">else</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#005CC5;">print</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;request response: &quot;</span><span style="color:#24292E;">, response)</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#005CC5;">print</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;request response status_code: &quot;</span><span style="color:#24292E;">, response.</span><span style="color:#6F42C1;">status_code</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#005CC5;">print</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;request response headers: &quot;</span><span style="color:#24292E;">, response.</span><span style="color:#6F42C1;">headers</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#005CC5;">print</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;request response body_size: &quot;</span><span style="color:#24292E;">, response.</span><span style="color:#6F42C1;">body_size</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#005CC5;">print</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;request response body: &quot;</span><span style="color:#24292E;">, response.</span><span style="color:#6F42C1;">body</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#005CC5;">print</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;request response cookies: &quot;</span><span style="color:#24292E;">, response.</span><span style="color:#6F42C1;">cookies</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#005CC5;">print</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;request response url: &quot;</span><span style="color:#24292E;">, response.</span><span style="color:#6F42C1;">url</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#D73A49;">end</span></span>
<span class="line"><span style="color:#D73A49;">local</span><span style="color:#24292E;"> response, error_message </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">coromega</span><span style="color:#24292E;">:</span><span style="color:#005CC5;">http_request</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;GET&quot;</span><span style="color:#24292E;">, </span><span style="color:#032F62;">&quot;http://example.com&quot;</span><span style="color:#24292E;">)</span></span></code></pre></div></li></ul><h2 id="http-get" tabindex="-1">HTTP get <a class="header-anchor" href="#http-get" aria-label="Permalink to &quot;HTTP get&quot;">​</a></h2><ul><li>http_get(url,option) 等效于: http_request(&quot;get&quot;,url,option)</li></ul><h2 id="http-post" tabindex="-1">HTTP post <a class="header-anchor" href="#http-post" aria-label="Permalink to &quot;HTTP post&quot;">​</a></h2><ul><li>http_post(url,option) 等效于: http_request(&quot;post&quot;,url,option)</li></ul><h2 id="http-put" tabindex="-1">HTTP put <a class="header-anchor" href="#http-put" aria-label="Permalink to &quot;HTTP put&quot;">​</a></h2><ul><li>http_put(url,option) 等效于: http_request(&quot;out&quot;,url,option)</li></ul><h2 id="http-delete" tabindex="-1">HTTP delete <a class="header-anchor" href="#http-delete" aria-label="Permalink to &quot;HTTP delete&quot;">​</a></h2><ul><li>http_delete(url,option) 等效于: http_request(&quot;delete&quot;,url,option)</li></ul><h2 id="http-head" tabindex="-1">HTTP head <a class="header-anchor" href="#http-head" aria-label="Permalink to &quot;HTTP head&quot;">​</a></h2><ul><li>http_head(url,option) 等效于: http_request(&quot;head&quot;,url,option)</li></ul><h2 id="http-patch" tabindex="-1">HTTP patch <a class="header-anchor" href="#http-patch" aria-label="Permalink to &quot;HTTP patch&quot;">​</a></h2><ul><li>http_patch(url,option) 等效于: http_request(&quot;patch&quot;,url,option)</li></ul><h2 id="综合使用" tabindex="-1">综合使用 <a class="header-anchor" href="#综合使用" aria-label="Permalink to &quot;综合使用&quot;">​</a></h2><div class="language-lua vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">lua</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">local</span><span style="color:#E1E4E8;"> omega </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">require</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;omega&quot;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#79B8FF;">package.path</span><span style="color:#E1E4E8;"> </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> (</span><span style="color:#9ECBFF;">&quot;%s;%s&quot;</span><span style="color:#E1E4E8;">):</span><span style="color:#79B8FF;">format</span><span style="color:#E1E4E8;">(</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#79B8FF;">package.path</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">    omega.</span><span style="color:#B392F0;">storage_path</span><span style="color:#E1E4E8;">.</span><span style="color:#79B8FF;">get_code_path</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;LuaLoader&quot;</span><span style="color:#E1E4E8;">, </span><span style="color:#9ECBFF;">&quot;?.lua&quot;</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#F97583;">local</span><span style="color:#E1E4E8;"> coromega </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">require</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;coromega&quot;</span><span style="color:#E1E4E8;">).</span><span style="color:#79B8FF;">from</span><span style="color:#E1E4E8;">(omega)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#B392F0;">coromega</span><span style="color:#E1E4E8;">:</span><span style="color:#79B8FF;">start_new</span><span style="color:#E1E4E8;">(</span><span style="color:#F97583;">function</span><span style="color:#E1E4E8;">()</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">local</span><span style="color:#E1E4E8;"> response, error_message </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#B392F0;">coromega</span><span style="color:#E1E4E8;">:</span><span style="color:#79B8FF;">http_request</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;GET&quot;</span><span style="color:#E1E4E8;">, </span><span style="color:#9ECBFF;">&quot;http://example.com&quot;</span><span style="color:#E1E4E8;">, {</span></span>
<span class="line"><span style="color:#E1E4E8;">        query </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;page=1&quot;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">        timeout </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;30s&quot;</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">        headers </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;">            Accept </span><span style="color:#F97583;">=</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;*/*&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">        }</span></span>
<span class="line"><span style="color:#E1E4E8;">    })</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">if</span><span style="color:#E1E4E8;"> error_message </span><span style="color:#F97583;">then</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#79B8FF;">print</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;request error: &quot;</span><span style="color:#E1E4E8;">, error_message)</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">else</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#79B8FF;">print</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;request response: &quot;</span><span style="color:#E1E4E8;">, response)</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#79B8FF;">print</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;request response status_code: &quot;</span><span style="color:#E1E4E8;">, response.</span><span style="color:#B392F0;">status_code</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#79B8FF;">print</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;request response headers: &quot;</span><span style="color:#E1E4E8;">, response.</span><span style="color:#B392F0;">headers</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#79B8FF;">print</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;request response body_size: &quot;</span><span style="color:#E1E4E8;">, response.</span><span style="color:#B392F0;">body_size</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#79B8FF;">print</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;request response body: &quot;</span><span style="color:#E1E4E8;">, response.</span><span style="color:#B392F0;">body</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#79B8FF;">print</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;request response cookies: &quot;</span><span style="color:#E1E4E8;">, response.</span><span style="color:#B392F0;">cookies</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">        </span><span style="color:#79B8FF;">print</span><span style="color:#E1E4E8;">(</span><span style="color:#9ECBFF;">&quot;request response url: &quot;</span><span style="color:#E1E4E8;">, response.</span><span style="color:#B392F0;">url</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#F97583;">end</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;">-- or just:</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;">-- local response, error_message = coromega:http_get(&quot;http://example.com&quot;, {</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;">--     query = &quot;page=1&quot;,</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;">--     timeout = &quot;30s&quot;,</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;">--     headers = {</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;">--         Accept = &quot;*/*&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;">--     }</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;">-- })</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;">-- or just</span></span>
<span class="line"><span style="color:#E1E4E8;">    </span><span style="color:#6A737D;">-- local response, error_message = coromega:http_post(&quot;http://example.com&quot;)</span></span>
<span class="line"><span style="color:#F97583;">end</span><span style="color:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#B392F0;">coromega</span><span style="color:#E1E4E8;">:</span><span style="color:#79B8FF;">run</span><span style="color:#E1E4E8;">()</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">local</span><span style="color:#24292E;"> omega </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">require</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;omega&quot;</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#005CC5;">package.path</span><span style="color:#24292E;"> </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> (</span><span style="color:#032F62;">&quot;%s;%s&quot;</span><span style="color:#24292E;">):</span><span style="color:#005CC5;">format</span><span style="color:#24292E;">(</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#005CC5;">package.path</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">    omega.</span><span style="color:#6F42C1;">storage_path</span><span style="color:#24292E;">.</span><span style="color:#005CC5;">get_code_path</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;LuaLoader&quot;</span><span style="color:#24292E;">, </span><span style="color:#032F62;">&quot;?.lua&quot;</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#D73A49;">local</span><span style="color:#24292E;"> coromega </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">require</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;coromega&quot;</span><span style="color:#24292E;">).</span><span style="color:#005CC5;">from</span><span style="color:#24292E;">(omega)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6F42C1;">coromega</span><span style="color:#24292E;">:</span><span style="color:#005CC5;">start_new</span><span style="color:#24292E;">(</span><span style="color:#D73A49;">function</span><span style="color:#24292E;">()</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">local</span><span style="color:#24292E;"> response, error_message </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#6F42C1;">coromega</span><span style="color:#24292E;">:</span><span style="color:#005CC5;">http_request</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;GET&quot;</span><span style="color:#24292E;">, </span><span style="color:#032F62;">&quot;http://example.com&quot;</span><span style="color:#24292E;">, {</span></span>
<span class="line"><span style="color:#24292E;">        query </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;page=1&quot;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">        timeout </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;30s&quot;</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">        headers </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;">            Accept </span><span style="color:#D73A49;">=</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;*/*&quot;</span></span>
<span class="line"><span style="color:#24292E;">        }</span></span>
<span class="line"><span style="color:#24292E;">    })</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">if</span><span style="color:#24292E;"> error_message </span><span style="color:#D73A49;">then</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#005CC5;">print</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;request error: &quot;</span><span style="color:#24292E;">, error_message)</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">else</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#005CC5;">print</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;request response: &quot;</span><span style="color:#24292E;">, response)</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#005CC5;">print</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;request response status_code: &quot;</span><span style="color:#24292E;">, response.</span><span style="color:#6F42C1;">status_code</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#005CC5;">print</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;request response headers: &quot;</span><span style="color:#24292E;">, response.</span><span style="color:#6F42C1;">headers</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#005CC5;">print</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;request response body_size: &quot;</span><span style="color:#24292E;">, response.</span><span style="color:#6F42C1;">body_size</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#005CC5;">print</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;request response body: &quot;</span><span style="color:#24292E;">, response.</span><span style="color:#6F42C1;">body</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#005CC5;">print</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;request response cookies: &quot;</span><span style="color:#24292E;">, response.</span><span style="color:#6F42C1;">cookies</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#24292E;">        </span><span style="color:#005CC5;">print</span><span style="color:#24292E;">(</span><span style="color:#032F62;">&quot;request response url: &quot;</span><span style="color:#24292E;">, response.</span><span style="color:#6F42C1;">url</span><span style="color:#24292E;">)</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#D73A49;">end</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6A737D;">-- or just:</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6A737D;">-- local response, error_message = coromega:http_get(&quot;http://example.com&quot;, {</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6A737D;">--     query = &quot;page=1&quot;,</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6A737D;">--     timeout = &quot;30s&quot;,</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6A737D;">--     headers = {</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6A737D;">--         Accept = &quot;*/*&quot;</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6A737D;">--     }</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6A737D;">-- })</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6A737D;">-- or just</span></span>
<span class="line"><span style="color:#24292E;">    </span><span style="color:#6A737D;">-- local response, error_message = coromega:http_post(&quot;http://example.com&quot;)</span></span>
<span class="line"><span style="color:#D73A49;">end</span><span style="color:#24292E;">)</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6F42C1;">coromega</span><span style="color:#24292E;">:</span><span style="color:#005CC5;">run</span><span style="color:#24292E;">()</span></span></code></pre></div>`,17),e=[l];function t(r,c,E,y,u,i){return a(),n("div",null,e)}const h=s(p,[["render",t]]);export{F as __pageData,h as default};
